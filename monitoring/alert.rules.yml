groups:
  - name: availability
    rules:
      - alert: BackendDown
        expr: up{job="pusk-backend"} == 0
        for: 10s
        labels:
          severity: critical
        annotations:
          summary: "Backend is DOWN"
          description: "Spring Boot service is not reachable"
  - name: errors
    rules:
      - alert: Backend5xxErrors
        expr: increase(http_server_requests_seconds_count{status=~"5.."}[30s]) > 0
        for: 0s
        labels:
          severity: warning
        annotations:
          summary: "Backend returns 5xx errors"
          description: "There are server errors detected"
  - name: performance
    rules:
      - alert: HighHeapUsage
        expr: (jvm_memory_used_bytes{area="heap"} / jvm_memory_max_bytes{area="heap"}) > 0.85
        for: 30s
        labels:
          severity: warning
        annotations:
          summary: "High JVM Heap usage"
          description: "Heap usage is above 85%"
